<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        img {
            width: 120px;
            height: 180px;
        }
    </style>

</head>

<body>
    <button id="showBtn">show</button>
    <button id="hideBtn">hide</button>
    <button id="shuffleBtn">shuffle</button>
    <br><br>
    <div id="board">
        <!-- 카드를 보여줄 곳 -->
        <img src="./cardImg/1_1.png" alt="">
        <img src="./cardImg/back.png" alt="">
    </div>

    <script>
        window.onload = function () { // main 메서드
            initGame(); // 게임 초기화
            startGame(); // 게임 시작
        }

        function initGame() {
            // 1. card를 담을 배열을 만든다.
            let cardArr = [];

            // 2. 배열을 초기화하고
            initCard(cardArr);

            // 3. 배열을 섞는다.
            shuffleCard(cardArr);

            // 4. 카드를 div#board에 보여준다.
            showCard(cardArr);

            // 5. 각 카드에 클릭 이벤트를 등록한다.
            let imgArr = document.getElementsByTagName("img");

            for (let i = 0; i < imgArr.length; i++) {
                imgArr[i].onclick = cardClick;
            }
        }

        // card가 앞면이면 true 아니면 false를 반환
        function isFront(card) {
            return false;
        }

        // 카드를 모두 뒤집는다.
        function flipAll(cardArr) {
            // 카드의 총 개수만큼 반복문 돌면서 flip(card)를 호출
            flip(card[0]);
        }

        // 카드를 뒤집는다.
        function flip(card) {
            // 1. 카드가 앞면인지 확인한다.
            if(isFront()) {
                // 1-1. 앞면(그림)이면 뒷면(농담곰)을 보여준다.
                showBack(card);
            } else {
                // 1-2. 뒷면(농담곰)이면 앞면(그림을 보여준다.)
                showFront(card);
            }

        }

        function cardClick(card) {
            let card = this;
            // 1. 카드를 앞면인지 확인한다.
            if (isFront(card))
                // 1-1. 앞면이면 return
                return;
            // 1-2. 뒷면이면 뒤집는다.
            flip(card);

            // 2. 뒤집혀있는 카드가 2장인가?
            if (checkCard()) {
                // 2-1. 2장이라면 두 카드의 짝이 일치하는지 체크한다.
                if (checkPair()) {
                    // 2-2. 일치하면 게임 종료
                    alert("성공")
                } else {
                    // 2-3. 일치하지 않으면 클릭했던 카드들을 다시 뒤집는다.
                    alert("실패");
                    flipAll(cardArr);
                }
            }

        }

        function startGame() {

        }
    </script>
</body>

</html>